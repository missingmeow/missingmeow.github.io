import{r as t,o as p,c,a as n,b as a,F as o,d as l,e}from"./app.74b92c89.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const u={},i=l(`<h2 id="context-\u521D\u4F53\u9A8C" tabindex="-1"><a class="header-anchor" href="#context-\u521D\u4F53\u9A8C" aria-hidden="true">#</a> context \u521D\u4F53\u9A8C</h2><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_XOPEN_SOURCE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ucontext.h&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ucontext_t context<span class="token punctuation">;</span>
 
    <span class="token function">getcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u4E0A\u9762\u7684\u7A0B\u5E8F\u5F88\u7B80\u5355\uFF0C\u9996\u5148\u5B9A\u4E49\u4E86\u4E00\u4E2A\u4FDD\u5B58\u4E0A\u4E0B\u6587\u7684\u7ED3\u6784\u4F53\u53D8\u91CF <code>context</code>\uFF0C\u8C03\u7528 <code>getcontext</code> \u51FD\u6570\u83B7\u53D6\u5F53\u524D\u7684\u4E0A\u4E0B\u6587\u5185\u5BB9\uFF0C\u4FDD\u5B58\u5230 <code>context</code> \u53D8\u91CF\u4E2D\uFF0C\u6253\u5370\u8F93\u51FA Hello World\uFF0C\u7136\u540E\u518D\u8BBE\u7F6E\u4E00\u4E0B\u4E0A\u4E0B\u6587\u7684\u5185\u5BB9\u3002</p><p>\u4E0D\u77E5\u9053\u8F93\u51FA\u7ED3\u679C\u6709\u6CA1\u6709\u731C\u5BF9\u5462\uFF0C\u6CA1\u9519\uFF0C\u5C31\u662F\u4E00\u76F4\u4E0D\u65AD\u7684\u8F93\u51FA Hello World\u3002\u4E0B\u9762\u6211\u4EEC\u6765\u770B\u770B context \u76F8\u5173\u7684\u5177\u4F53\u5185\u5BB9\u3002</p><h2 id="ucontext-t-\u7ED3\u6784\u4F53" tabindex="-1"><a class="header-anchor" href="#ucontext-t-\u7ED3\u6784\u4F53" aria-hidden="true">#</a> ucontext_t \u7ED3\u6784\u4F53</h2><p><code>uconext_t</code> \u662F\u4E00\u4E2A\u7ED3\u6784\u4F53\uFF0C\u91CC\u9762\u5B9A\u4E49\u4E86\u4FDD\u5B58\u4E0A\u4E0B\u6587\u6240\u9700\u8981\u7684\u6240\u6709\u5185\u5BB9\uFF0C\u6211\u4EEC\u6765\u770B\u4E00\u4E0B macOS \u7CFB\u7EDF\u5934\u6587\u4EF6\u4E2D\u5B83\u7684\u5B9A\u4E49\uFF1A</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code>_STRUCT_UCONTEXT
<span class="token punctuation">{</span>
  <span class="token keyword">int</span>                     uc_onstack<span class="token punctuation">;</span>
  __darwin_sigset_t       uc_sigmask<span class="token punctuation">;</span>     <span class="token comment">/* signal mask used by this context */</span>
  _STRUCT_SIGALTSTACK     uc_stack<span class="token punctuation">;</span>       <span class="token comment">/* stack used by this context */</span>
  _STRUCT_UCONTEXT        <span class="token operator">*</span>uc_link<span class="token punctuation">;</span>       <span class="token comment">/* pointer to resuming context */</span>
  __darwin_size_t         uc_mcsize<span class="token punctuation">;</span>      <span class="token comment">/* size of the machine context passed in */</span>
  _STRUCT_MCONTEXT        <span class="token operator">*</span>uc_mcontext<span class="token punctuation">;</span>   <span class="token comment">/* pointer to machine specific context */</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_XOPEN_SOURCE</span></span>
  _STRUCT_MCONTEXT        __mcontext_data<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">/* _XOPEN_SOURCE */</span></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* user context */</span>
<span class="token keyword">typedef</span> _STRUCT_UCONTEXT        ucontext_t<span class="token punctuation">;</span>     <span class="token comment">/* [???] user context */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u6211\u4EEC\u6311\u51E0\u4E2A\u91CD\u8981\u7684\u53D8\u91CF\u6765\u8BF4\u660E\u4E00\u4E0B\uFF1A</p><ol><li><code>uc_link</code>: \u5F53\u5F53\u524D\u4E0A\u4E0B\u6587\u8FD0\u884C\u7EC8\u6B62\u65F6\u7CFB\u7EDF\u4F1A\u6062\u590D<code>uc_link</code>\u6307\u5411\u7684\u4E0A\u4E0B\u6587\u3002\u6CE8\u610F\uFF0C\u5982\u679C\u8BE5\u503C\u4E3A\u7A7A\uFF0C\u5219\u5F53\u524D\u4E0A\u4E0B\u6587\u6267\u884C\u5B8C\u540E\u7EBF\u7A0B\u4F1A\u76F4\u63A5\u9000\u51FA\u3002</li><li><code>uc_sigmask</code>: \u4E3A\u8BE5\u4E0A\u4E0B\u6587\u4E2D\u7684\u963B\u585E\u4FE1\u53F7\u96C6\u5408\u3002</li><li><code>uc_stack</code>: \u4E3A\u8BE5\u4E0A\u4E0B\u6587\u4E2D\u4F7F\u7528\u7684\u6808\u3002</li><li><code>uc_mcontext</code>: \u4FDD\u5B58\u7684\u4E0A\u4E0B\u6587\u7684\u7279\u5B9A\u673A\u5668\u8868\u793A\uFF0C\u5305\u62EC\u8C03\u7528\u7EBF\u7A0B\u7684\u7279\u5B9A\u5BC4\u5B58\u5668\u7B49\uFF0C\u5176\u5B9E\u73B0\u65B9\u5F0F\u4F9D\u8D56\u4E8E\u5E95\u5C42\u8FD0\u884C\u7684\u7CFB\u7EDF\u67B6\u6784\uFF0C\u662F\u5E73\u53F0\u3001\u786C\u4EF6\u76F8\u5173\u7684\u3002</li></ol><h2 id="context-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#context-\u51FD\u6570" aria-hidden="true">#</a> context \u51FD\u6570</h2><p>\u8DDF\u4E0A\u4E0B\u6587\u76F8\u5173\u7684\u51FD\u6570\u4E00\u5171\u53EA\u6709 4 \u4E2A\uFF0C\u4E0B\u9762\u6211\u4EEC\u5206\u522B\u6765\u770B\u770B\u5427\u3002</p><h3 id="getcontext" tabindex="-1"><a class="header-anchor" href="#getcontext" aria-hidden="true">#</a> getcontext</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">getcontext</span><span class="token punctuation">(</span>ucontext_t <span class="token operator">*</span>ucp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8BE5\u51FD\u6570\u7684\u4F5C\u7528\u662F\u628A\u5F53\u524D\u7684\u4E0A\u4E0B\u6587\u4FDD\u5B58\u5230 ucp \u6240\u6307\u5411\u7684\u5185\u5BB9\u7A7A\u95F4\u4E2D\u3002</p><h3 id="setcontext" tabindex="-1"><a class="header-anchor" href="#setcontext" aria-hidden="true">#</a> setcontext</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">setcontext</span><span class="token punctuation">(</span><span class="token keyword">const</span> ucontext_t <span class="token operator">*</span>ucp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8FD9\u4E2A\u51FD\u6570\u7684\u4F5C\u7528\u662F\u5C06\u5F53\u524D\u7A0B\u5E8F\u6267\u884C\u5207\u6362\u5230\u53C2\u6570ucp\u6240\u6307\u5411\u7684\u4E0A\u4E0B\u6587\u72B6\u6001\u4E2D\u3002</p><p><code>setcontext</code> \u7684\u4E0A\u4E0B\u6587 <code>ucp</code> \u5E94\u8BE5\u901A\u8FC7 <code>getcontext</code> \u6216\u8005 <code>makecontext</code> \u53D6\u5F97\uFF0C\u5982\u679C\u8C03\u7528\u6210\u529F\u5219\u4E0D\u8FD4\u56DE\u3002</p><p>\u5982\u679C\u4E0A\u4E0B\u6587\u662F\u901A\u8FC7\u8C03\u7528 <code>getcontext</code> \u53D6\u5F97\uFF0C\u7A0B\u5E8F\u4F1A\u7EE7\u7EED\u6267\u884C\u8FD9\u4E2A\u8C03\u7528\u3002\u5982\u679C\u4E0A\u4E0B\u6587\u662F\u901A\u8FC7\u8C03\u7528 <code>makecontext</code> \u53D6\u5F97,\u7A0B\u5E8F\u4F1A\u8C03\u7528 <code>makecontext</code> \u51FD\u6570\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6307\u5411\u7684\u51FD\u6570\uFF0C\u5982\u679C <code>func</code> \u51FD\u6570\u8FD4\u56DE\uFF0C\u5219\u6062\u590D <code>makecontext</code> \u7B2C\u4E00\u4E2A\u53C2\u6570\u6307\u5411\u7684\u4E0A\u4E0B\u6587\u7B2C\u4E00\u4E2A\u53C2\u6570\u6307\u5411\u7684\u4E0A\u4E0B\u6587 <code>context_t</code> \u4E2D\u6307\u5411\u7684 <code>uc_link</code>\u3002\u5982\u679C <code>uc_link</code> \u4E3A <code>NULL</code>\uFF0C\u5219\u7EBF\u7A0B\u9000\u51FA\u3002</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// \u901A\u8FC7\u4FEE\u6539\u4E00\u5F00\u59CB\u7684\u4F8B\u5B50\uFF0C\u6211\u4EEC\u518D\u6765\u770B\u770B</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_XOPEN_SOURCE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ucontext.h&gt;</span></span>

<span class="token keyword">static</span> ucontext_t context<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;hello world&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ucontext_t main<span class="token punctuation">;</span>
  <span class="token function">setcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ok\\n&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> ~/Projects/helloworld $ ./a.out           
hello world
hello world
ok
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// \u518D\u505A\u4E00\u70B9\u7B80\u5355\u7684\u4FEE\u6539</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_XOPEN_SOURCE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ucontext.h&gt;</span></span>

<span class="token keyword">static</span> ucontext_t context<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;hello world&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">char</span> stack<span class="token punctuation">[</span><span class="token number">128</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">getcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>uc_link <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>uc_stack<span class="token punctuation">.</span>ss_sp <span class="token operator">=</span> stack<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>uc_stack<span class="token punctuation">.</span>ss_size <span class="token operator">=</span> <span class="token number">128</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>
  <span class="token function">makecontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>context<span class="token punctuation">,</span> func<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// setcontext(&amp;context);</span>
  ucontext_t main<span class="token punctuation">;</span>
  <span class="token function">swapcontext</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>main<span class="token punctuation">,</span> <span class="token operator">&amp;</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ok\\n&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u4ECE\u8F93\u51FA\u4E2D\u53D1\u73B0\uFF0C\u4E0D\u7BA1\u662F setcontext \u8FD8\u662F swapcontext \u90FD\u4E0D\u4F1A\u8F93\u51FA ok</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="makecontext" tabindex="-1"><a class="header-anchor" href="#makecontext" aria-hidden="true">#</a> makecontext</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">makecontext</span><span class="token punctuation">(</span>ucontext_t <span class="token operator">*</span>ucp<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>makecontext</code> \u4FEE\u6539\u901A\u8FC7 <code>getcontext</code> \u53D6\u5F97\u7684\u4E0A\u4E0B\u6587 <code>ucp</code> (\u8FD9\u610F\u5473\u7740\u8C03\u7528 <code>makecontext</code> \u524D\u5FC5\u987B\u5148\u8C03\u7528 <code>getcontext</code>)\u3002\u7136\u540E\u7ED9\u8BE5\u4E0A\u4E0B\u6587\u6307\u5B9A\u4E00\u4E2A\u6808\u7A7A\u95F4 <code>ucp-&gt;stack</code>\uFF0C\u8BBE\u7F6E\u540E\u7EE7\u7684\u4E0A\u4E0B\u6587 <code>ucp-&gt;uc_link</code>\u3002</p><p>\u5F53\u4E0A\u4E0B\u6587\u901A\u8FC7 <code>setcontext</code> \u6216\u8005 <code>swapcontext</code> \u6FC0\u6D3B\u540E\uFF0C\u6267\u884C <code>func</code> \u51FD\u6570\uFF0C<code>argc</code> \u4E3A <code>func</code> \u7684\u53C2\u6570\u4E2A\u6570\uFF0C\u540E\u9762\u662F <code>func</code> \u7684\u53C2\u6570\u5E8F\u5217\u3002\u5F53 <code>func</code> \u6267\u884C\u8FD4\u56DE\u540E\uFF0C\u7EE7\u627F\u7684\u4E0A\u4E0B\u6587\u88AB\u6FC0\u6D3B\uFF0C\u5982\u679C\u7EE7\u627F\u4E0A\u4E0B\u6587\u4E3A <code>NULL</code> \u65F6\uFF0C\u7EBF\u7A0B\u9000\u51FA\u3002</p><h3 id="swapcontext" tabindex="-1"><a class="header-anchor" href="#swapcontext" aria-hidden="true">#</a> swapcontext</h3><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">swapcontext</span><span class="token punctuation">(</span>ucontext_t <span class="token operator">*</span>oucp<span class="token punctuation">,</span> ucontext_t <span class="token operator">*</span>ucp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u4FDD\u5B58\u5F53\u524D\u4E0A\u4E0B\u6587\u5230 <code>oucp</code> \u7ED3\u6784\u4F53\u4E2D\uFF0C\u7136\u540E\u6FC0\u6D3B <code>upc</code> \u4E0A\u4E0B\u6587\u3002\u53EF\u4EE5\u7B80\u5355\u7684\u628A <code>swapcontext = getcontext + setcontext</code>\u3002</p><p>\u5982\u679C\u6267\u884C\u6210\u529F\uFF0Cgetcontext \u8FD4\u56DE 0\uFF0Csetcontext \u548C swapcontext\u4E0D\u8FD4\u56DE\uFF1B\u5982\u679C\u6267\u884C\u5931\u8D25\uFF0Cgetcontext, setcontext, swapcontext \u8FD4\u56DE -1\uFF0C\u5E76\u8BBE\u7F6E\u5BF9\u5E94\u7684errno.</p><p>\u7B80\u5355\u8BF4\u6765\uFF0Cgetcontext \u83B7\u53D6\u5F53\u524D\u4E0A\u4E0B\u6587\uFF0Csetcontext \u8BBE\u7F6E\u5F53\u524D\u4E0A\u4E0B\u6587\uFF0Cswapcontext \u5207\u6362\u4E0A\u4E0B\u6587\uFF0Cmakecontext \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u4E0A\u4E0B\u6587\u3002</p><h2 id="\u8FDB\u9636" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u9636" aria-hidden="true">#</a> \u8FDB\u9636</h2><p>\u5F53\u4F60\u628A\u534F\u7A0B\u76F8\u5173\u7684\u57FA\u7840\u77E5\u8BC6\u90FD\u5F04\u61C2\u5F04\u900F\u540E\uFF0C\u5C31\u53EF\u4EE5\u5F00\u59CB\u7740\u624B\u534F\u7A0B\u5E93\u7684\u4E8B\u60C5\uFF0C\u8FDB\u4E00\u6B65\u5B66\u4E60\u8BF7\u7EE7\u7EED\u5B66\u4E60\u53C2\u8003\u94FE\u63A5\u4E2D\u7684\u5185\u5BB9\u3002</p><h2 id="\u53C2\u8003\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u94FE\u63A5" aria-hidden="true">#</a> \u53C2\u8003\u94FE\u63A5</h2>`,34),k={href:"https://blog.csdn.net/qq910894904/article/details/41911175",target:"_blank",rel:"noopener noreferrer"},d=e("ucontext-\u4EBA\u4EBA\u90FD\u53EF\u4EE5\u5B9E\u73B0\u7684\u7B80\u5355\u534F\u7A0B\u5E93"),b={href:"https://www.jianshu.com/p/c4de909fee75",target:"_blank",rel:"noopener noreferrer"},m=e("\u4E91\u98CE\u57FA\u4E8EC\u7684\u534F\u7A0B\u5E93\u6E90\u7801\u5206\u6790");function x(h,g){const s=t("ExternalLinkIcon");return p(),c(o,null,[i,n("ol",null,[n("li",null,[n("a",k,[d,a(s)])]),n("li",null,[n("a",b,[m,a(s)])])])],64)}var w=r(u,[["render",x]]);export{w as default};
